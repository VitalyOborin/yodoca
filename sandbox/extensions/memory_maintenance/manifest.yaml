id: memory_maintenance
name: Memory Maintenance
version: "1.0.0"
description: >
  Nightly memory maintenance: extracts semantic facts from completed sessions,
  applies Ebbinghaus confidence decay, and prunes stale facts.

entrypoint: main:MemoryMaintenanceExtension

config:
  decay_threshold: 0.05
  conflict_min_confidence: 0.8
  entity_enrichment_batch_size: 50

agent:
  integration_mode: tool
  model: gpt-5-mini
  uses_tools:
    - memory
  limits:
    max_turns: 30

schedules:
  - name: entity_enrichment
    cron: "0 2 * * *"
    task: execute_entity_enrichment
    description: "Re-extract entities with accurate NER (spaCy/LLM)"
  - name: nightly_consolidation
    cron: "0 3 * * *"
    task: execute_consolidation
  - name: daily_decay
    cron: "0 4 * * *"
    task: execute_decay

events:
  subscribes:
    - topic: memory.session_completed
      handler: invoke_agent

depends_on:
  - memory

enabled: true
